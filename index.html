<html>
<head>
  <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .actions {
      padding-top: 20px;
      padding-bottom: 20px;
    }
  </style>
  <script type="text/javascript" src="http://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
  <script type="text/javascript">
    var data = [
      {code: 110004280060},
      {code: 110004280093}
    ];


    function search() {
      $('#main').empty();
      var getData = [], count = 0;
      for (var i in data) {
        var iframe = document.createElement("iframe");
        iframe.src = "/getorder?d=" + data[i].code;
        iframe.style.display = 'none';

        iframe.onload = function () {
          count++;
          var info = this.contentWindow.document.body.innerText;
          var new_obj = {};
          new_obj.code = info.substr(0, 12);
          new_obj.status = info.substr(13).replace(/\r\n/g, '');
          getData.push(new_obj);
        };
        document.getElementById('main').appendChild(iframe);
      }
      _see();
      function _see() {
        if (data.length == count) {
          console.log(getData);
          _createTable(getData);
        } else {
          setTimeout(_see, 200)
        }
      }
    }
    function _createTable(data) {
      var ths = Object.keys(data[0]);
      var table = $('<table class="table table-striped"></table>');
      var trh = $('<tr></tr>');
      for (var i = 0; i < ths.length; i++) {
        var th = $('<th>' + ths[i] + '</th>');
        trh.append(th);
      }
      table.append(trh);
      $('#main').append(table);
      for (var j in data) {
        var tr = $('<tr></tr>');
        for (var k = 0; k < ths.length; k++) {
          var td = $('<td>' + data[j][ths[k]] + '</td>');
          tr.append(td);
        }
        table.append(tr);
      }
    }

  </script>
</head>
<body>
<div class="container actions">
  <button class="btn btn-default" onclick="search();">查询</button>
</div>
<div id="main" class="container">
</div>
</body>
</html>